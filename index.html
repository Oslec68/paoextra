<<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Visita Lojas GPA</title>
  <style>
    :root { --azul:#1e3a8a; --verde:#0a7a3c; }
    *{margin:0;padding:0;box-sizing:border-box}
    body{font:14px Arial;background:#f5f5f5;color:#111;min-height:100vh;display:flex;flex-direction:column}
    header{background:var(--azul);text-align:center;padding:15px 0;color:#fff}
    header h1{font-size:22px}
    header small{font-size:12px;opacity:0.9}
    #weather{margin-top:8px;font-size:12px;opacity:0.9}
    form{flex:1;padding:15px}
    section{background:#fff;margin:10px 0;padding:15px;border-radius:10px;box-shadow:0 2px 4px rgba(0,0,0,0.1)}
    label{display:block;font-size:12px;font-weight:bold;margin-bottom:5px;color:#333}
    input,textarea{width:100%;padding:10px;font-size:14px;border:1px solid #ddd;border-radius:6px;margin-bottom:10px}
    input[readonly]{background:#f0f0f0}
    textarea{height:60px;resize:none;font-family:inherit}
    .row{display:flex;gap:10px}
    .row > div{flex:1}
    .cod{flex:0 0 80px}
    .metrics-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .hidden{display:none}
    .btn-excluir{background:#dc3545;color:white;border:none;border-radius:3px;padding:2px 6px;font-size:10px;cursor:pointer}
    .checkbox-item{display:flex;align-items:center;gap:10px;margin-bottom:5px}
    .emoji-status{cursor:pointer;font-size:18px}
    .btn-finalizar{background:var(--verde);color:white;padding:12px;font-weight:bold;border:none;border-radius:6px;width:100%;margin-top:10px}
    .btn-limpar{background:#666;color:white;padding:10px;border:none;border-radius:6px;width:100%;margin-top:10px}
    footer{background:#fff;padding:15px}
  </style>
</head>
<body>
  <header>
    <h1>Visita de Lojas</h1>
    <small id="clock"></small>
    <div id="weather">
      <span id="weather-emoji">üå§Ô∏è</span>
      <span id="temp">--¬∞C</span>
      <span id="weather-desc">Campinas ‚Ä¢ Carregando...</span>
    </div>
  </header>

  <form>
    <section>
      <div class="row">
        <div class="cod">
          <label>C√≥digo</label>
          <input id="cod" maxlength="4" oninput="buscarLoja()">
        </div>
        <div>
          <label>Loja</label>
          <input id="nome" readonly>
        </div>
      </div>
      <label>Cidade</label>
      <input id="cidade" readonly>

      <label>Seu nome</label>
      <input id="usuario">
    </section>

    <section id="metricas">
      <h3>M√©tricas</h3>
      <div class="metrics-grid">
        <div>
          <label>Vendas do dia</label>
          <input oninput="formatarMoeda(this)">
        </div>
        <div>
          <label>Clientes atendidos</label>
          <input type="number">
        </div>
        <div>
          <label>Meta di√°ria</label>
          <input oninput="formatarMoeda(this)">
        </div>
        <div>
          <label>Observa√ß√µes</label>
          <textarea></textarea>
        </div>
      </div>
    </section>

    <section id="checklist">
      <h3>Checklist</h3>
      <div id="lista-checklist">
        <div class="checkbox-item">
          <span class="emoji-status" onclick="trocarEmoji(this)">üî¥</span>
          <span class="texto">Ruptura</span>
        </div>
        <div class="checkbox-item">
          <span class="emoji-status" onclick="trocarEmoji(this)">üü†</span>
          <span class="texto">Layout</span>
        </div>
        <div class="checkbox-item">
          <span class="emoji-status" onclick="trocarEmoji(this)">üü¢</span>
          <span class="texto">Abastecimento</span>
        </div>
      </div>
    </section>

    <footer>
      <button type="button" class="btn-finalizar" onclick="finalizar()">Finalizar Visita</button>
      <button type="button" class="btn-limpar" onclick="limpar()">Limpar Tudo</button>
    </footer>
  </form>

  <script>
    const lojas = {
      "0412": { nome: "PA HIPICA", cidade: "CAMPINAS" },
      "0022": { nome: "PA VALINHOS PORTAL", cidade: "VALINHOS" },
      "0052": { nome: "PA GUARUJA PUGLISI", cidade: "GUARUJA" },
      "0001": { nome: "PA JARDIM PAULISTA", cidade: "SAO PAULO" }
      // Adicione mais lojas conforme necess√°rio
    };

    function buscarLoja() {
      const cod = document.getElementById('cod').value;
      const loja = lojas[cod];
      if (loja) {
        document.getElementById('nome').value = loja.nome;
        document.getElementById('cidade').value = loja.cidade;
        updateWeather(loja.cidade);
      } else {
        document.getElementById('nome').value = 'Loja n√£o encontrada';
        document.getElementById('cidade').value = '';
      }
    }

    function updateWeather(cidade) {
      const hora = new Date().getHours();
      let emoji = "üå§Ô∏è", desc = "Dia";
      if (hora < 6 || hora >= 20) emoji = "üåô", desc = "Noite";
      else if (hora < 12) emoji = "üåÖ", desc = "Manh√£";
      else if (hora < 18) emoji = "‚òÄÔ∏è", desc = "Tarde";
      else emoji = "üåá", desc = "Entardecer";

      document.getElementById('temp').textContent = '25¬∞C';
      document.getElementById('weather-desc').textContent = `${cidade} ‚Ä¢ ${desc}`;
      document.getElementById('weather-emoji').textContent = emoji;
    }

    function trocarEmoji(span) {
      const emojis = ['üî¥','üü†','üü°','üü¢','üîµ'];
      const atual = span.textContent;
      const prox = emojis[(emojis.indexOf(atual)+1)%emojis.length];
      span.textContent = prox;
    }

    function finalizar() {
      const cod = document.getElementById('cod').value;
      const usuario = document.getElementById('usuario').value;
      if (!cod || !usuario) {
        alert("Preencha todos os campos obrigat√≥rios");
        return;
      }
      alert("‚úÖ Visita registrada com sucesso!");
    }

    function limpar() {
      if (!confirm("Deseja realmente limpar tudo?")) return;
      document.querySelectorAll("input").forEach(e => e.value = "");
      document.getElementById("cidade").value = "";
      updateWeather("Campinas");
    }

    function formatarMoeda(input) {
      let valor = input.value.replace(/\D/g, '');
      valor = (parseInt(valor) / 100).toFixed(2);
      input.value = `R$ ${valor.replace('.', ',')}`;
    }

    function updateClock() {
      document.getElementById('clock').textContent = new Date().toLocaleString('pt-BR');
    }

    setInterval(updateClock, 1000);
    updateClock();
    updateWeather("Campinas");
  </script>
</body>
</html>